# 🖥️ 故事插入可视化工具使用指南

## 📋 功能特点

- **可视化界面**: 基于tkinter的友好图形界面
- **虚拟用户**: 自动创建演示用户，无需手动管理用户ID
- **图片预览**: 选择图片后可实时预览
- **批量插入**: 内置3个示例故事，可一键批量插入
- **实时计数**: 显示已插入故事数量
- **路径管理**: 自动处理本地图片路径（/static/uploads/）

## 🚀 使用步骤

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 运行GUI工具
```bash
python story_gui_inserter.py
```

### 3. 使用界面

#### 单个故事插入：
1. **故事标题**: 输入英文标题
2. **故事简介**: 输入故事描述
3. **故事内容**: 在文本框中输入完整故事内容
4. **选择图片**: 点击"选择图片"按钮选择封面图片（可选）
5. **插入故事**: 点击"✅ 插入故事"完成插入

#### 批量插入：
1. 点击"📁 批量插入示例"
2. 确认插入3个内置示例故事
3. 等待批量插入完成

#### 其他功能：
- **清空表单**: 点击"🗑️ 清空表单"重置所有输入
- **状态监控**: 底部状态栏显示操作进度

## 🔧 技术细节

### 虚拟用户设置
- **用户名**: demo_user
- **邮箱**: demo@example.com
- **密码**: demo123456
- 自动创建，无需手动管理

### 图片处理
- **支持格式**: JPG, PNG, WEBP
- **存储路径**: `/static/uploads/`（本地路径）
- **命名规则**: `gui_story_{id}_{timestamp}.{ext}`
- **预览功能**: 200x150像素预览

### 故事默认设置
- **语言**: 固定为 `en-US` (English)
- **状态**: 自动设为 `published`
- **阅读时间**: 按250词/分钟自动计算
- **发布时间**: 插入时的当前时间

## 📊 内置示例故事

1. **The Enchanted Forest Adventure** - 魔法森林冒险故事
2. **The Time Traveler's Dilemma** - 时间旅行者的道德抉择
3. **The Last Library on Mars** - 火星上最后的图书馆

## ⚠️ 注意事项

1. **数据库连接**: 确保config.py中的数据库配置正确
2. **权限问题**: 确保有写入static/uploads目录的权限
3. **图片大小**: 建议图片文件不超过2MB
4. **内容长度**: 故事内容建议控制在合理范围内

## 🐛 故障排除

### 常见问题：

1. **"无法创建演示用户"**
   - 检查数据库连接配置
   - 确认users表存在

2. **"图片预览失败"**
   - 确认选择的是支持的图片格式
   - 检查图片文件是否损坏

3. **"插入故事失败"**
   - 检查所有必填字段是否填写
   - 确认数据库连接正常

### 调试模式
在脚本中添加调试信息：
```python
# 在main()函数前添加
import logging
logging.basicConfig(level=logging.DEBUG)
```

## 🎯 使用建议

1. **故事质量**: 建议输入有意义的英文故事内容
2. **图片选择**: 选择与故事主题相关的高质量图片
3. **批量操作**: 先测试单个故事插入，再进行批量操作
4. **数据备份**: 重要数据插入前建议备份数据库

---

**开发者提示**: 此工具专为快速本地测试设计，生产环境请使用更robust的解决方案。